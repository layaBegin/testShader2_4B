{
  "code": "import GameConfig from \"./GameConfig\";\r\nclass Main {\r\n    constructor() {\r\n        if (window[\"Laya3D\"])\r\n            Laya3D.init(GameConfig.width, GameConfig.height);\r\n        else\r\n            Laya.init(GameConfig.width, GameConfig.height, Laya[\"WebGL\"]);\r\n        Laya[\"Physics\"] && Laya[\"Physics\"].enable();\r\n        Laya[\"DebugPanel\"] && Laya[\"DebugPanel\"].enable();\r\n        Laya.stage.scaleMode = GameConfig.scaleMode;\r\n        Laya.stage.screenMode = GameConfig.screenMode;\r\n        Laya.stage.alignV = GameConfig.alignV;\r\n        Laya.stage.alignH = GameConfig.alignH;\r\n        Laya.URL.exportSceneToJson = GameConfig.exportSceneToJson;\r\n        if (GameConfig.debug || Laya.Utils.getQueryString(\"debug\") == \"true\")\r\n            Laya.enableDebugPanel();\r\n        if (GameConfig.physicsDebug && Laya[\"PhysicsDebugDraw\"])\r\n            Laya[\"PhysicsDebugDraw\"].enable();\r\n        if (GameConfig.stat)\r\n            Laya.Stat.show();\r\n        Laya.alertGlobalError = true;\r\n        this.initShader();\r\n        Laya.ResourceVersion.enable(\"version.json\", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);\r\n    }\r\n    initShader() {\r\n        var attributeMap = { 'a_Position': Laya.VertexMesh.MESH_POSITION0, 'a_Normal': Laya.VertexMesh.MESH_NORMAL0 };\r\n        var uniformMap = { 'u_MvpMatrix': Laya.Shader3D.PERIOD_SPRITE, 'u_WorldMat': Laya.Shader3D.PERIOD_SPRITE };\r\n        var simpleShaderVS = `\r\n\t\t#include \"Lighting.glsl\"\r\n\t\tattribute vec4 a_Position;\r\n\t\tuniform mat4 u_MvpMatrix;\r\n\t\tuniform mat4 u_WorldMat;\r\n\t\tattribute vec3 a_Normal;\r\n\t\tvarying vec3 v_Normal;\r\n\t\tvoid main()\r\n\t\t{\r\n\t\t\tgl_Position = u_MvpMatrix * a_Position;\r\n\t\t\tmat3 worldMat=mat3(u_WorldMat);\r\n\t\t\tv_Normal=worldMat*a_Normal;\r\n\t\t\tgl_Position=remapGLPositionZ(gl_Position);\r\n\t\t}`;\r\n        var simpleShaderFS = `\r\n\t\t#ifdef FSHIGHPRECISION\r\n\t\tprecision highp float;\r\n\t\t#else\r\n\t\tprecision mediump float;\r\n\t\t#endif\r\n\t\tvarying vec3 v_Normal;\r\n\t\tvoid main()\r\n\t\t{    \r\n\t\t\tgl_FragColor=vec4(v_Normal,2.0);\r\n\t\t}`;\r\n        var customShader = Laya.Shader3D.add(\"CustomShader1\");\r\n        var subShader = new Laya.SubShader(attributeMap, uniformMap);\r\n        customShader.addSubShader(subShader);\r\n        subShader.addShaderPass(simpleShaderVS, simpleShaderFS);\r\n    }\r\n    onVersionLoaded() {\r\n        Laya.AtlasInfoManager.enable(\"fileconfig.json\", Laya.Handler.create(this, this.onConfigLoaded));\r\n    }\r\n    onConfigLoaded() {\r\n        GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);\r\n    }\r\n}\r\nnew Main();\r\n",
  "references": [
    "D:/layaTestProject/testShader2_4B/src/GameConfig.ts"
  ]
}
